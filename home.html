<!-- home.html -->
<section class="hero" aria-label="Destaques">
  <div class="carousel" id="carousel">
    <div class="slide active">
      <a href="https://www.sead.pi.gov.br/programa-casa-legal-e-destaque-na-6a-conferencia-nacional-das-cidades" target="_blank" rel="noopener">
        <img src="https://www.pi.gov.br/wp-content/uploads/2025/08/WhatsApp-Image-2025-08-20-at-14.47.28-1536x1152.jpeg"
             alt="Programa Casa Legal é destaque na 6ª Conferência Nacional das Cidades"
             style="width:100%;height:420px;object-fit:cover">
        <div class="caption">Programa Casa Legal é destaque na 6ª Conferência Nacional das Cidades</div>
      </a>
    </div>
    <div class="slide">
      <a href="https://www.pi.gov.br/sead-vai-regularizar-2-mil-imoveis-no-bairro-santa-maria-da-codipi-com-o-casa-legal/" target="_blank" rel="noopener">
        <img src="https://i.postimg.cc/v8vrf1FY/Whats-App-Image-2025-08-01-at-19-41-29-1024x683.jpg"
             alt="Sead vai regularizar 2 mil imóveis no bairro Santa Maria da Codipi com o Casa Legal"
             style="width:100%;height:420px;object-fit:cover">
        <div class="caption">Sead vai regularizar 2 mil imóveis no bairro Santa Maria da Codipi com o Casa Legal</div>
      </a>
    </div>
    <div class="slide">
      <a href="https://www.pi.gov.br/rafael-fonteles-entrega-mil-registros-de-imoveis-em-piripiri-e-celebra-70-mil-titulos-em-todo-o-piaui/" target="_blank" rel="noopener">
        <img src="https://i.postimg.cc/7LX2nyqL/piripiri.jpg"
             alt="Rafael Fonteles entrega mil registros de imóveis em Piripiri e celebra 70 mil títulos em todo o Piauí"
             style="width:100%;height:420px;object-fit:cover">
        <div class="caption">Rafael Fonteles entrega mil registros de imóveis em Piripiri e celebra 70 mil títulos em todo o Piauí</div>
      </a>
    </div>
    <div class="dots" id="dots"></div>
  </div>
</section>

<!-- PERFIL + COMPETÊNCIAS -->
<section aria-label="Perfil e Competências" class="home-section home-bio">
  <!-- Coluna esquerda: card do perfil -->
  <article class="bio-left">
    <div class="bio-card">
      <div class="bio-header">
        <img class="bio-avatar" src="https://conectapiaui.com.br/media/image_bank/2024/3/thumbs/carol-viveiros_WVjDPVx.png.1200x0_q95_crop.png" alt="Foto da Superintendente" loading="lazy">
        <div class="bio-ident">
          <div class="bio-role">Superintendente</div>
          <div class="bio-name">Caroline Viveiros Moura da Cruz</div>
        </div>
      </div>

      <ul class="bio-list">
        <li>
          <span class="ico"><i class="bi bi-telephone-fill"></i></span>
          <span>Telefone não informado</span>
        </li>
        <li>
          <span class="ico"><i class="bi bi-envelope-fill"></i></span>
          <a href="mailto:sead@pi.gov.br">sead@pi.gov.br</a>
        </li>
        <li>
          <span class="ico"><i class="bi bi-clock-fill"></i></span>
          <span>7h30 às 13h30.</span>
        </li>
        <li>
          <span class="ico"><i class="bi bi-link-45deg"></i></span>
          <a href="https://portal.pi.gov.br" target="_blank" rel="noopener">https://portal.pi.gov.br</a>
        </li>
        <li>
          <span class="ico"><i class="bi bi-geo-alt-fill"></i></span>
          <span>Av. Pedro Freitas 1900 (São Pedro), Teresina, PI</span>
        </li>
      </ul>
    </div>
  </article>

  <!-- Coluna direita: competências -->
  <article class="bio-right">
    <h2 class="titulo-destaque">O que fazemos</h2>
    <p>
      A Superintendência de Patrimônio Imobiliário do Piauí (SPI), ligada à Secretaria de Administração (SEAD), é responsável por coordenar, executar e controlar as atividades administrativas do patrimônio imobiliário do Estado, como planejar e executar a regularização fundiária urbana e rural, gerenciar o banco de dados geográficos dos imóveis estaduais e realizar inventários e avaliações. Suas ações incluem a formalização de propriedades para famílias e comunidades, o que promove segurança jurídica, dignidade e cidadania, além de ser um importante vetor de desenvolvimento econômico. 
    </p>
  </article>
</section>

<!-- BARRA DE ATALHOS FIXA -->
<section aria-label="Atalhos rápidos">
  <div class="home-cards-bar">
    <div class="card">
      <h3>Gestão do Patrimônio Imobiliário</h3>
      <p>Coordenar e executar atividades administrativas relacionadas a todos os bens e direitos imobiliários do Estado do Piauí.</p>
    </div>
    <div class="card">
      <h3>Regularização Fundiária</h3>
      <p>Planejar e executar a política de regularização fundiária do Estado, tanto em áreas urbanas quanto rurais, regularizando ocupações legítimas em áreas públicas.</p>
    </div>
    <div class="card">
      <h3>Inventário e Avaliação</h3>
      <p>Gerenciar o banco de dados geográficos dos imóveis estaduais, realizar o inventário desses bens, definir metodologias de avaliação e analisar laudos.</p>
    </div>
    <div class="card">
      <h3>Planejamento e Modernização</h3>
      <p>Elaborar relatórios técnicos e subsidiar o planejamento da gestão pública estadual, utilizando novas tecnologias e conceitos para modernizar a gestão do patrimônio público.</p>
    </div>
  </div>
</section>

<!-- REDES SOCIAIS -->
<section class="social-bar">
  <div class="social-inner">
    <h2>Acompanhe nossas<br>redes sociais</h2>
    <div class="social-icons">
      <a href="https://wa.me/558694897859" target="_blank" rel="noopener" class="social-item">
        <i class="bi bi-whatsapp"></i>
        <span>Receba nosso conteúdo pelo whatsapp</span>
      </a>
      <a href="https://www.instagram.com/patrimonio.seadpi/" target="_blank" rel="noopener" class="social-item">
        <i class="bi bi-instagram"></i>
        <span>Siga nosso perfil no instagram</span>
      </a>
      <a href="https://www.youtube.com/@governopiauioficial" target="_blank" rel="noopener" class="social-item">
        <i class="bi bi-youtube"></i>
        <span>Se inscreva em nosso canal no youtube</span>
      </a>
    </div>
  </div>
</section>

<!-- estilos específicos da home -->
<style>
 /* ===== CARROSSEL (horizontal, sem flash) ===== */
.carousel{
  position: relative;
  overflow: hidden;
  border-radius: 12px;
  height: 420px;
  background:#000;              /* evita branco de fundo */
}

.carousel .slide{
  position: absolute;
  inset: 0;
  display: block;
  /* GPU + suavidade */
  will-change: transform;
  backface-visibility: hidden;
  transform: translate3d(100%,0,0);  /* todos começam fora (direita) */
  z-index: 1;
}
.carousel .slide.active{
  transform: translate3d(0,0,0);
  z-index: 2;
}

.carousel .slide img{
  position:absolute;
  inset:0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.carousel .caption{
  position: absolute; left: 0; right: 0;
  bottom: 0%; /* legenda mais alta */
  padding: .75rem 1rem;
  color: #fff; font-weight: 700; line-height: 1.3;
  background: linear-gradient(180deg, rgba(0,0,0,.35) 0%, rgba(0,0,0,0) 80%);
  pointer-events: none;
}

.carousel .dots{
  position: absolute;
  left: 65%; transform: translateX(-50%);
  bottom: 60px;                /* você pediu os dots mais altos */
  display: flex; gap: 8px; z-index: 3;
}
.carousel .dot{
  width: 9px; height: 9px; border-radius: 50%;
  background: rgba(255,255,255,.9); cursor: pointer; opacity: .7;
}
.carousel .dot.active{ opacity: 1; }


  /* ===== HOME ===== */
  .home-section { max-width: var(--container); margin: 1.5rem auto 0; padding: 0 1rem; }

  .home-bio {
    display: grid;
    grid-template-columns: 0.9fr 1.1fr;
    gap: 2rem;
    align-items: start;
  }

  .bio-card {
    background: #ffff;
    border: 1px solid #ffff;
    border-radius: 12px;
    box-shadow: var(--shadow);
    padding: 1rem;
  }
  .bio-header { 
    display: grid; 
    grid-template-columns: 80px 1fr;
    gap: .75rem; 
    align-items: center; 
  }

  .bio-avatar {
    width: 100px !important;
    aspect-ratio: 1/1;  
    border-radius: 50% !important;
    object-fit: cover;  
    display: block;
    border: 2px solid #fff;
    box-shadow: 0 2px 6px rgba(0,0,0,.06);
  }

  .bio-role { font-size: .92rem; color: var(--muted); line-height: 1.2; }
  .bio-name { font-size: 1.05rem; font-weight: 700; }
  .bio-list { list-style: none; margin: .75rem 0 0; padding: 0; display: grid; gap: .65rem; }
  .bio-list li { display: grid; grid-template-columns: 22px 1fr; gap: .5rem; align-items: start; }
  .bio-list .ico {
    width: 22px; height: 22px; display: inline-grid; place-items: center;
    border-radius: 6px; background: #ffff; border: 1px solid #ffff;
    font-size: .95rem; color: #0a489b;
  }
  .bio-list .ico i { color: #0a489b; font-size: 16px; }
  .bio-list a { color: #0a489b; }

  .bio-right h2 { margin: 0 0 .75rem; font-size: 1.5rem; color: #0a489b; }
  .bio-right p { margin: 0 0 .9rem; line-height: 1.75; color: #334155; }

  @media (max-width: 980px) {
    .home-bio { grid-template-columns: 1fr; }
  }

  .home-cards-bar .card { text-align: left; }
  .home-cards-bar .card h3 { margin-bottom: .5rem; }
  .home-cards-bar .card p { margin: 0; line-height: 1.6; }
  .home-cards-bar {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 1rem;
  }
  .home-cards-bar .card {
    text-align: left;
    padding: 1rem;
    border: 1px solid #fff;
    border-radius: 12px;
    box-shadow: var(--shadow);
    background: #fff;
  }
  .home-cards-bar .card h3 {
    min-height: 48px;
    margin: 0 0 .5rem;
    display: flex;
    align-items: flex-end;
  }
  .home-cards-bar .card p { margin: 0; line-height: 1.6; }

  .titulo-destaque {
    font-size: 2rem;
    font-weight: 700;
    color: #0a489b;
    margin-bottom: 1rem;
  }

  /* --- Barra de redes sociais --- */
  .social-bar {
    background: #ffff;
    padding: 6rem 1rem;  /* altura do bloco rede sociais */
    border-top: 1px solid #fff;
    border-bottom: 1px solid #ffff;
  }
  .social-inner {
    max-width: var(--container);
    margin: 0 auto;
    text-align: center;
  }
  .social-bar h2 {
    margin: 0 0 1.5rem;
    font-size: 1.6rem;
    font-weight: 700;
    color: #0a489b;
    text-align: left;
    white-space: normal;
    word-break: break-word;
  }
  .social-icons {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 2rem;
  }
  .social-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: .4rem;
    font-size: .9rem;
    color: #334155;
    text-decoration: none;
  }
  .social-item i {
    font-size: 3.5rem;
    color: #454545;
    transition: color .2s;
  }
  .social-item:hover i { color: #454545; }
</style>

<!-- carrossel (JS com transição horizontal) -->
<script>
(function(){
  const car = document.getElementById('carousel');
  if (!car) return;

  const slides = Array.from(car.querySelectorAll('.slide'));
  const dotsBox = car.querySelector('#dots');
  const INTERVAL = 5000;
  let idx = 0, timer = null, touchStartX = null, touchStartY = null;

  function layoutInitial(){
    slides.forEach((s,i)=>{
      s.style.transition = 'none';
      s.style.transform  = i === idx ? 'translateX(0)' : 'translateX(100%)';
    });
    requestAnimationFrame(()=> slides.forEach(s=> s.style.transition = ''));
  }

  function renderDots(){
    if (!dotsBox) return;
    dotsBox.innerHTML = '';
    slides.forEach((_, i) => {
      const d = document.createElement('div');
      d.className = 'dot' + (i === idx ? ' active' : '');
      d.addEventListener('click', () => go(i));
      dotsBox.appendChild(d);
    });
  }

  function slideTo(newIndex, dir){
  if (newIndex === idx || slides.length < 2) return;

  const curr = slides[idx];
  const next = slides[newIndex];
  const direction = dir || ((newIndex > idx) ? +1 : -1);

  // prepara camadas
  curr.style.zIndex = 2;
  next.style.zIndex = 3;

  // 1) desliga transições e posiciona o próximo fora da tela
  curr.style.transition = 'none';
  next.style.transition = 'none';
  next.style.transform  = `translate3d(${direction*100}%,0,0)`;
  curr.style.transform  = 'translate3d(0,0,0)';

  // 2) no próximo frame, liga transições e move os dois ao mesmo tempo
  requestAnimationFrame(()=>{
    curr.style.transition = 'transform .6s ease';
    next.style.transition = 'transform .6s ease';

    // anima simultâneo: atual sai, próximo entra
    curr.style.transform = `translate3d(${-direction*100}%,0,0)`;
    next.style.transform = 'translate3d(0,0,0)';

    // 3) ao terminar, atualiza estado
    function onDone(e){
      if (e.target !== next) return;
      next.removeEventListener('transitionend', onDone);
      curr.classList.remove('active');
      next.classList.add('active');
      idx = newIndex;

      // normaliza z-index após a troca
      curr.style.zIndex = 1;
      next.style.zIndex = 2;

      renderDots();
    }
    next.addEventListener('transitionend', onDone);
  });
}


  function next(){ slideTo((idx + 1) % slides.length, +1); }
  function prev(){ slideTo((idx - 1 + slides.length) % slides.length, -1); }

  function go(n){
    if (n === idx) return;
    slideTo((n + slides.length) % slides.length, n > idx ? +1 : -1);
    restart();
  }

  function start(){ stop(); timer = setInterval(next, INTERVAL); }
  function stop(){ if (timer) { clearInterval(timer); timer = null; } }
  function restart(){ stop(); start(); }

  function onKey(e){
    if (!document.body.classList.contains('page-home')) return;
    if (e.key === 'ArrowRight') { e.preventDefault(); next(); restart(); }
    if (e.key === 'ArrowLeft')  { e.preventDefault(); prev(); restart(); }
  }

  function onTouchStart(e){
    if (!e.touches || e.touches.length !== 1) return;
    touchStartX = e.touches[0].clientX;
    touchStartY = e.touches[0].clientY;
  }
  function onTouchEnd(e){
    if (touchStartX == null) return;
    const dx = (e.changedTouches?.[0]?.clientX ?? 0) - touchStartX;
    const dy = (e.changedTouches?.[0]?.clientY ?? 0) - touchStartY;
    if (Math.abs(dx) > 40 && Math.abs(dy) < 60) { dx < 0 ? next() : prev(); restart(); }
    touchStartX = touchStartY = null;
  }

  if (slides.length){
    slides.forEach(s => s.classList.remove('active'));
    slides[0].classList.add('active');
    layoutInitial();
    renderDots();
    start();

    car.addEventListener('mouseenter', stop);
    car.addEventListener('mouseleave', start);
    document.addEventListener('keydown', onKey);
    document.addEventListener('visibilitychange', () => document.hidden ? stop() : start());
    car.addEventListener('touchstart', onTouchStart, { passive: true });
    car.addEventListener('touchend', onTouchEnd, { passive: true });
  }
})();
</script>
